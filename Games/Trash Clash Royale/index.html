<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <style>
        html,
        body {
            margin: 0;
            height: 100%;
        }

        body {
            display: flex;
            justify-content: center;
            /* centers horizontally */
            align-items: center;
            /* centers vertically */
            background-color: #f0f0f0;
            /* optional, just to see spacing */
        }

        canvas {
            display: block;
            border: 1px solid #ccc;
            /* optional */
        }
    </style>
</head>

<body>
    <div class="applet_div">
        <script type="text/javascript" charset="utf-8" src="scenario27793.js"></script>
        <script type="text/javascript" charset="utf-8" src="jszip.min.js"></script>
        <script type="text/javascript" defer="yes">
async function mergeFiles(part1Url, part2Url) {
  const [res1, res2] = await Promise.all([
    fetch(part1Url),
    fetch(part2Url)
  ]);

  if (!res1.ok || !res2.ok) {
    throw new Error("Failed to fetch one or both parts");
  }

  const buffer1 = await res1.arrayBuffer();
  const buffer2 = await res2.arrayBuffer();

  const mergedBlob = new Blob(
    [buffer1, buffer2],
    { type: "application/java-archive" }
  );

  return URL.createObjectURL(mergedBlob);
}

            
            async function pre_main() {
        storage_params = [];
        storage_params["storage.standalone"] = true;
        storage_params["storage.passcode"] = "0000000000000000";
        storage_params["storage.scenarioId"] = 27793;
        storage_params["storage.userId"] = -1;
        storage_params["storage.userName"] = "";

        var appletFile = await mergeFiles("something.jar.part1.bin", "something.jar.part2.bin");

        var xhr = new XMLHttpRequest();
        xhr.open("GET", appletFile);
        xhr.responseType = "arraybuffer";
        xhr.onload = function () {
          JSZip.loadAsync(xhr.response).then(function (zip) {
            window.zip = zip;
            main();
            window.setTimeout(function () {
              runButton = document.getElementById("playButton");
              if (runButton.textContent == "Run") {
                runButton.click();
              }
            }, 500);
          });
        };

        xhr.onerror = function () {
          alert("Failed to load applet.");
        };

        xhr.send();
      }
(async () => {
      await pre_main();
})();
        </script>

        <div style="display: inline-block;">
            <div>
                <div style="width: 100%;">
                    <div style="display: inline-block; touch-action: pinch-zoom;">
                        <canvas id="scenarioCanvas" width="1618" height="993">
                            Your browser does not support the canvas tag.
                        </canvas>
                    </div>
                </div>
            </div>

            <div style="visibility: block;">
                <button disabled="true" id="playButton" style="width: 5em;">Run</button>
                <button disabled="true" id="resetButton" style="width: 5em;">Reset</button>
                <input type="range" id="speedSlider" min=0 max=99 disabled="true"
          style="vertical-align: middle;"></input>
            </div>
        </div>
    </div>
</body>


</html>
